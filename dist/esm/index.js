var Te=Object.create;var De=Object.defineProperty;var Fe=Object.getOwnPropertyDescriptor;var Re=Object.getOwnPropertyNames;var Le=Object.getPrototypeOf,$e=Object.prototype.hasOwnProperty;var we=(w,s)=>()=>(s||w((s={exports:{}}).exports,s),s.exports);var qe=(w,s,c,a)=>{if(s&&typeof s=="object"||typeof s=="function")for(let m of Re(s))!$e.call(w,m)&&m!==c&&De(w,m,{get:()=>s[m],enumerable:!(a=Fe(s,m))||a.enumerable});return w};var ne=(w,s,c)=>(c=w!=null?Te(Le(w)):{},qe(s||!w||!w.__esModule?De(c,"default",{value:w,enumerable:!0}):c,w));var me=we((Ie,de)=>{(function(w){"use strict";var s=1e9,c={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},a=!0,m="[DecimalError] ",O=m+"Invalid argument: ",P=m+"Exponent out of range: ",G=Math.floor,E=Math.pow,b=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,A,I=1e7,v=7,ie=9007199254740991,T=G(ie/v),d={};d.absoluteValue=d.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},d.comparedTo=d.cmp=function(e){var t,o,i,n,r=this;if(e=new r.constructor(e),r.s!==e.s)return r.s||-e.s;if(r.e!==e.e)return r.e>e.e^r.s<0?1:-1;for(i=r.d.length,n=e.d.length,t=0,o=i<n?i:n;t<o;++t)if(r.d[t]!==e.d[t])return r.d[t]>e.d[t]^r.s<0?1:-1;return i===n?0:i>n^r.s<0?1:-1},d.decimalPlaces=d.dp=function(){var e=this,t=e.d.length-1,o=(t-e.e)*v;if(t=e.d[t],t)for(;t%10==0;t/=10)o--;return o<0?0:o},d.dividedBy=d.div=function(e){return k(this,new this.constructor(e))},d.dividedToIntegerBy=d.idiv=function(e){var t=this,o=t.constructor;return y(k(t,new o(e),0,1),o.precision)},d.equals=d.eq=function(e){return!this.cmp(e)},d.exponent=function(){return N(this)},d.greaterThan=d.gt=function(e){return this.cmp(e)>0},d.greaterThanOrEqualTo=d.gte=function(e){return this.cmp(e)>=0},d.isInteger=d.isint=function(){return this.e>this.d.length-2},d.isNegative=d.isneg=function(){return this.s<0},d.isPositive=d.ispos=function(){return this.s>0},d.isZero=function(){return this.s===0},d.lessThan=d.lt=function(e){return this.cmp(e)<0},d.lessThanOrEqualTo=d.lte=function(e){return this.cmp(e)<1},d.logarithm=d.log=function(e){var t,o=this,i=o.constructor,n=i.precision,r=n+5;if(e===void 0)e=new i(10);else if(e=new i(e),e.s<1||e.eq(A))throw Error(m+"NaN");if(o.s<1)throw Error(m+(o.s?"NaN":"-Infinity"));return o.eq(A)?new i(0):(a=!1,t=k(Z(o,r),Z(e,r),r),a=!0,y(t,n))},d.minus=d.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?se(t,e):ee(t,(e.s=-e.s,e))},d.modulo=d.mod=function(e){var t,o=this,i=o.constructor,n=i.precision;if(e=new i(e),!e.s)throw Error(m+"NaN");return o.s?(a=!1,t=k(o,e,0,1).times(e),a=!0,o.minus(t)):y(new i(o),n)},d.naturalExponential=d.exp=function(){return R(this)},d.naturalLogarithm=d.ln=function(){return Z(this)},d.negated=d.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},d.plus=d.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?ee(t,e):se(t,(e.s=-e.s,e))},d.precision=d.sd=function(e){var t,o,i,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(O+e);if(t=N(n)+1,i=n.d.length-1,o=i*v+1,i=n.d[i],i){for(;i%10==0;i/=10)o--;for(i=n.d[0];i>=10;i/=10)o++}return e&&t>o?t:o},d.squareRoot=d.sqrt=function(){var e,t,o,i,n,r,f,u=this,l=u.constructor;if(u.s<1){if(!u.s)return new l(0);throw Error(m+"NaN")}for(e=N(u),a=!1,n=Math.sqrt(+u),n==0||n==1/0?(t=W(u.d),(t.length+e)%2==0&&(t+="0"),n=Math.sqrt(t),e=G((e+1)/2)-(e<0||e%2),n==1/0?t="5e"+e:(t=n.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),i=new l(t)):i=new l(n.toString()),o=l.precision,n=f=o+3;;)if(r=i,i=r.plus(k(u,r,f+2)).times(.5),W(r.d).slice(0,f)===(t=W(i.d)).slice(0,f)){if(t=t.slice(f-3,f+1),n==f&&t=="4999"){if(y(r,o+1,0),r.times(r).eq(u)){i=r;break}}else if(t!="9999")break;f+=4}return a=!0,y(i,o)},d.times=d.mul=function(e){var t,o,i,n,r,f,u,l,p,h=this,g=h.constructor,S=h.d,C=(e=new g(e)).d;if(!h.s||!e.s)return new g(0);for(e.s*=h.s,o=h.e+e.e,l=S.length,p=C.length,l<p&&(r=S,S=C,C=r,f=l,l=p,p=f),r=[],f=l+p,i=f;i--;)r.push(0);for(i=p;--i>=0;){for(t=0,n=l+i;n>i;)u=r[n]+C[i]*S[n-i-1]+t,r[n--]=u%I|0,t=u/I|0;r[n]=(r[n]+t)%I|0}for(;!r[--f];)r.pop();return t?++o:r.shift(),e.d=r,e.e=o,a?y(e,g.precision):e},d.toDecimalPlaces=d.todp=function(e,t){var o=this,i=o.constructor;return o=new i(o),e===void 0?o:(q(e,0,s),t===void 0?t=i.rounding:q(t,0,8),y(o,e+N(o)+1,t))},d.toExponential=function(e,t){var o,i=this,n=i.constructor;return e===void 0?o=H(i,!0):(q(e,0,s),t===void 0?t=n.rounding:q(t,0,8),i=y(new n(i),e+1,t),o=H(i,!0,e+1)),o},d.toFixed=function(e,t){var o,i,n=this,r=n.constructor;return e===void 0?H(n):(q(e,0,s),t===void 0?t=r.rounding:q(t,0,8),i=y(new r(n),e+N(n)+1,t),o=H(i.abs(),!1,e+N(i)+1),n.isneg()&&!n.isZero()?"-"+o:o)},d.toInteger=d.toint=function(){var e=this,t=e.constructor;return y(new t(e),N(e)+1,t.rounding)},d.toNumber=function(){return+this},d.toPower=d.pow=function(e){var t,o,i,n,r,f,u=this,l=u.constructor,p=12,h=+(e=new l(e));if(!e.s)return new l(A);if(u=new l(u),!u.s){if(e.s<1)throw Error(m+"Infinity");return u}if(u.eq(A))return u;if(i=l.precision,e.eq(A))return y(u,i);if(t=e.e,o=e.d.length-1,f=t>=o,r=u.s,f){if((o=h<0?-h:h)<=ie){for(n=new l(A),t=Math.ceil(i/v+4),a=!1;o%2&&(n=n.times(u),K(n.d,t)),o=G(o/2),o!==0;)u=u.times(u),K(u.d,t);return a=!0,e.s<0?new l(A).div(n):y(n,i)}}else if(r<0)throw Error(m+"NaN");return r=r<0&&e.d[Math.max(t,o)]&1?-1:1,u.s=1,a=!1,n=e.times(Z(u,i+p)),a=!0,n=R(n),n.s=r,n},d.toPrecision=function(e,t){var o,i,n=this,r=n.constructor;return e===void 0?(o=N(n),i=H(n,o<=r.toExpNeg||o>=r.toExpPos)):(q(e,1,s),t===void 0?t=r.rounding:q(t,0,8),n=y(new r(n),e,t),o=N(n),i=H(n,e<=o||o<=r.toExpNeg,e)),i},d.toSignificantDigits=d.tosd=function(e,t){var o=this,i=o.constructor;return e===void 0?(e=i.precision,t=i.rounding):(q(e,1,s),t===void 0?t=i.rounding:q(t,0,8)),y(new i(o),e,t)},d.toString=d.valueOf=d.val=d.toJSON=function(){var e=this,t=N(e),o=e.constructor;return H(e,t<=o.toExpNeg||t>=o.toExpPos)};function ee(e,t){var o,i,n,r,f,u,l,p,h=e.constructor,g=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),a?y(t,g):t;if(l=e.d,p=t.d,f=e.e,n=t.e,l=l.slice(),r=f-n,r){for(r<0?(i=l,r=-r,u=p.length):(i=p,n=f,u=l.length),f=Math.ceil(g/v),u=f>u?f+1:u+1,r>u&&(r=u,i.length=1),i.reverse();r--;)i.push(0);i.reverse()}for(u=l.length,r=p.length,u-r<0&&(r=u,i=p,p=l,l=i),o=0;r;)o=(l[--r]=l[r]+p[r]+o)/I|0,l[r]%=I;for(o&&(l.unshift(o),++n),u=l.length;l[--u]==0;)l.pop();return t.d=l,t.e=n,a?y(t,g):t}function q(e,t,o){if(e!==~~e||e<t||e>o)throw Error(O+e)}function W(e){var t,o,i,n=e.length-1,r="",f=e[0];if(n>0){for(r+=f,t=1;t<n;t++)i=e[t]+"",o=v-i.length,o&&(r+=L(o)),r+=i;f=e[t],i=f+"",o=v-i.length,o&&(r+=L(o))}else if(f===0)return"0";for(;f%10===0;)f/=10;return r+f}var k=function(){function e(i,n){var r,f=0,u=i.length;for(i=i.slice();u--;)r=i[u]*n+f,i[u]=r%I|0,f=r/I|0;return f&&i.unshift(f),i}function t(i,n,r,f){var u,l;if(r!=f)l=r>f?1:-1;else for(u=l=0;u<r;u++)if(i[u]!=n[u]){l=i[u]>n[u]?1:-1;break}return l}function o(i,n,r){for(var f=0;r--;)i[r]-=f,f=i[r]<n[r]?1:0,i[r]=f*I+i[r]-n[r];for(;!i[0]&&i.length>1;)i.shift()}return function(i,n,r,f){var u,l,p,h,g,S,C,z,D,x,ce,j,pe,fe,ue,ge,V,le,ae=i.constructor,Se=i.s==n.s?1:-1,_=i.d,M=n.d;if(!i.s)return new ae(i);if(!n.s)throw Error(m+"Division by zero");for(l=i.e-n.e,V=M.length,ue=_.length,C=new ae(Se),z=C.d=[],p=0;M[p]==(_[p]||0);)++p;if(M[p]>(_[p]||0)&&--l,r==null?j=r=ae.precision:f?j=r+(N(i)-N(n))+1:j=r,j<0)return new ae(0);if(j=j/v+2|0,p=0,V==1)for(h=0,M=M[0],j++;(p<ue||h)&&j--;p++)pe=h*I+(_[p]||0),z[p]=pe/M|0,h=pe%M|0;else{for(h=I/(M[0]+1)|0,h>1&&(M=e(M,h),_=e(_,h),V=M.length,ue=_.length),fe=V,D=_.slice(0,V),x=D.length;x<V;)D[x++]=0;le=M.slice(),le.unshift(0),ge=M[0],M[1]>=I/2&&++ge;do h=0,u=t(M,D,V,x),u<0?(ce=D[0],V!=x&&(ce=ce*I+(D[1]||0)),h=ce/ge|0,h>1?(h>=I&&(h=I-1),g=e(M,h),S=g.length,x=D.length,u=t(g,D,S,x),u==1&&(h--,o(g,V<S?le:M,S))):(h==0&&(u=h=1),g=M.slice()),S=g.length,S<x&&g.unshift(0),o(D,g,x),u==-1&&(x=D.length,u=t(M,D,V,x),u<1&&(h++,o(D,V<x?le:M,x))),x=D.length):u===0&&(h++,D=[0]),z[p++]=h,u&&D[0]?D[x++]=_[fe]||0:(D=[_[fe]],x=1);while((fe++<ue||D[0]!==void 0)&&j--)}return z[0]||z.shift(),C.e=l,y(C,f?r+N(C)+1:r)}}();function R(e,t){var o,i,n,r,f,u,l=0,p=0,h=e.constructor,g=h.precision;if(N(e)>16)throw Error(P+N(e));if(!e.s)return new h(A);for(t==null?(a=!1,u=g):u=t,f=new h(.03125);e.abs().gte(.1);)e=e.times(f),p+=5;for(i=Math.log(E(2,p))/Math.LN10*2+5|0,u+=i,o=n=r=new h(A),h.precision=u;;){if(n=y(n.times(e),u),o=o.times(++l),f=r.plus(k(n,o,u)),W(f.d).slice(0,u)===W(r.d).slice(0,u)){for(;p--;)r=y(r.times(r),u);return h.precision=g,t==null?(a=!0,y(r,g)):r}r=f}}function N(e){for(var t=e.e*v,o=e.d[0];o>=10;o/=10)t++;return t}function J(e,t,o){if(t>e.LN10.sd())throw a=!0,o&&(e.precision=o),Error(m+"LN10 precision limit exceeded");return y(new e(e.LN10),t)}function L(e){for(var t="";e--;)t+="0";return t}function Z(e,t){var o,i,n,r,f,u,l,p,h,g=1,S=10,C=e,z=C.d,D=C.constructor,x=D.precision;if(C.s<1)throw Error(m+(C.s?"NaN":"-Infinity"));if(C.eq(A))return new D(0);if(t==null?(a=!1,p=x):p=t,C.eq(10))return t==null&&(a=!0),J(D,p);if(p+=S,D.precision=p,o=W(z),i=o.charAt(0),r=N(C),Math.abs(r)<15e14){for(;i<7&&i!=1||i==1&&o.charAt(1)>3;)C=C.times(e),o=W(C.d),i=o.charAt(0),g++;r=N(C),i>1?(C=new D("0."+o),r++):C=new D(i+"."+o.slice(1))}else return l=J(D,p+2,x).times(r+""),C=Z(new D(i+"."+o.slice(1)),p-S).plus(l),D.precision=x,t==null?(a=!0,y(C,x)):C;for(u=f=C=k(C.minus(A),C.plus(A),p),h=y(C.times(C),p),n=3;;){if(f=y(f.times(h),p),l=u.plus(k(f,new D(n),p)),W(l.d).slice(0,p)===W(u.d).slice(0,p))return u=u.times(2),r!==0&&(u=u.plus(J(D,p+2,x).times(r+""))),u=k(u,new D(g),p),D.precision=x,t==null?(a=!0,y(u,x)):u;u=l,n+=2}}function Y(e,t){var o,i,n;for((o=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(o<0&&(o=i),o+=+t.slice(i+1),t=t.substring(0,i)):o<0&&(o=t.length),i=0;t.charCodeAt(i)===48;)++i;for(n=t.length;t.charCodeAt(n-1)===48;)--n;if(t=t.slice(i,n),t){if(n-=i,o=o-i-1,e.e=G(o/v),e.d=[],i=(o+1)%v,o<0&&(i+=v),i<n){for(i&&e.d.push(+t.slice(0,i)),n-=v;i<n;)e.d.push(+t.slice(i,i+=v));t=t.slice(i),i=v-t.length}else i-=n;for(;i--;)t+="0";if(e.d.push(+t),a&&(e.e>T||e.e<-T))throw Error(P+o)}else e.s=0,e.e=0,e.d=[0];return e}function y(e,t,o){var i,n,r,f,u,l,p,h,g=e.d;for(f=1,r=g[0];r>=10;r/=10)f++;if(i=t-f,i<0)i+=v,n=t,p=g[h=0];else{if(h=Math.ceil((i+1)/v),r=g.length,h>=r)return e;for(p=r=g[h],f=1;r>=10;r/=10)f++;i%=v,n=i-v+f}if(o!==void 0&&(r=E(10,f-n-1),u=p/r%10|0,l=t<0||g[h+1]!==void 0||p%r,l=o<4?(u||l)&&(o==0||o==(e.s<0?3:2)):u>5||u==5&&(o==4||l||o==6&&(i>0?n>0?p/E(10,f-n):0:g[h-1])%10&1||o==(e.s<0?8:7))),t<1||!g[0])return l?(r=N(e),g.length=1,t=t-r-1,g[0]=E(10,(v-t%v)%v),e.e=G(-t/v)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(i==0?(g.length=h,r=1,h--):(g.length=h+1,r=E(10,v-i),g[h]=n>0?(p/E(10,f-n)%E(10,n)|0)*r:0),l)for(;;)if(h==0){(g[0]+=r)==I&&(g[0]=1,++e.e);break}else{if(g[h]+=r,g[h]!=I)break;g[h--]=0,r=1}for(i=g.length;g[--i]===0;)g.pop();if(a&&(e.e>T||e.e<-T))throw Error(P+N(e));return e}function se(e,t){var o,i,n,r,f,u,l,p,h,g,S=e.constructor,C=S.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new S(e),a?y(t,C):t;if(l=e.d,g=t.d,i=t.e,p=e.e,l=l.slice(),f=p-i,f){for(h=f<0,h?(o=l,f=-f,u=g.length):(o=g,i=p,u=l.length),n=Math.max(Math.ceil(C/v),u)+2,f>n&&(f=n,o.length=1),o.reverse(),n=f;n--;)o.push(0);o.reverse()}else{for(n=l.length,u=g.length,h=n<u,h&&(u=n),n=0;n<u;n++)if(l[n]!=g[n]){h=l[n]<g[n];break}f=0}for(h&&(o=l,l=g,g=o,t.s=-t.s),u=l.length,n=g.length-u;n>0;--n)l[u++]=0;for(n=g.length;n>f;){if(l[--n]<g[n]){for(r=n;r&&l[--r]===0;)l[r]=I-1;--l[r],l[n]+=I}l[n]-=g[n]}for(;l[--u]===0;)l.pop();for(;l[0]===0;l.shift())--i;return l[0]?(t.d=l,t.e=i,a?y(t,C):t):new S(0)}function H(e,t,o){var i,n=N(e),r=W(e.d),f=r.length;return t?(o&&(i=o-f)>0?r=r.charAt(0)+"."+r.slice(1)+L(i):f>1&&(r=r.charAt(0)+"."+r.slice(1)),r=r+(n<0?"e":"e+")+n):n<0?(r="0."+L(-n-1)+r,o&&(i=o-f)>0&&(r+=L(i))):n>=f?(r+=L(n+1-f),o&&(i=o-n-1)>0&&(r=r+"."+L(i))):((i=n+1)<f&&(r=r.slice(0,i)+"."+r.slice(i)),o&&(i=o-f)>0&&(n+1===f&&(r+="."),r+=L(i))),e.s<0?"-"+r:r}function K(e,t){if(e.length>t)return e.length=t,!0}function Q(e){var t,o,i;function n(r){var f=this;if(!(f instanceof n))return new n(r);if(f.constructor=n,r instanceof n){f.s=r.s,f.e=r.e,f.d=(r=r.d)?r.slice():r;return}if(typeof r=="number"){if(r*0!==0)throw Error(O+r);if(r>0)f.s=1;else if(r<0)r=-r,f.s=-1;else{f.s=0,f.e=0,f.d=[0];return}if(r===~~r&&r<1e7){f.e=0,f.d=[r];return}return Y(f,r.toString())}else if(typeof r!="string")throw Error(O+r);if(r.charCodeAt(0)===45?(r=r.slice(1),f.s=-1):f.s=1,b.test(r))Y(f,r);else throw Error(O+r)}if(n.prototype=d,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.clone=Q,n.config=n.set=ve,e===void 0&&(e={}),e)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<i.length;)e.hasOwnProperty(o=i[t++])||(e[o]=this[o]);return n.config(e),n}function ve(e){if(!e||typeof e!="object")throw Error(m+"Object expected");var t,o,i,n=["precision",1,s,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<n.length;t+=3)if((i=e[o=n[t]])!==void 0)if(G(i)===i&&i>=n[t+1]&&i<=n[t+2])this[o]=i;else throw Error(O+o+": "+i);if((i=e[o="LN10"])!==void 0)if(i==Math.LN10)this[o]=new this(i);else throw Error(O+o+": "+i);return this}c=Q(c),c.default=c.Decimal=c,A=new c(1),typeof define=="function"&&define.amd?define(function(){return c}):typeof de<"u"&&de.exports?de.exports=c:(w||(w=typeof self<"u"&&self&&self.self==self?self:Function("return this")()),w.Decimal=c)})(Ie)});var Ge=we((_e,Ee)=>{"use strict";Ee.exports=function(s){return s!=null&&typeof s=="object"&&Array.isArray(s)===!1}});var Ce=we((Be,Pe)=>{var Ne=Ge();Pe.exports=function(w,s,c){if(Ne(c)||(c={default:c}),!xe(w))return typeof c.default<"u"?c.default:w;typeof s=="number"&&(s=String(s));let a=Array.isArray(s),m=typeof s=="string",O=c.separator||".",P=c.joinChar||(typeof O=="string"?O:".");if(!m&&!a)return w;if(m&&s in w)return Oe(s,w,c)?w[s]:c.default;let G=a?s:Ve(s,O,c),E=G.length,b=0;do{let A=G[b];for(typeof A=="number"&&(A=String(A));A&&A.slice(-1)==="\\";)A=be([A.slice(0,-1),G[++b]||""],P,c);if(A in w){if(!Oe(A,w,c))return c.default;w=w[A]}else{let I=!1,v=b+1;for(;v<E;)if(A=be([A,G[v++]],P,c),I=A in w){if(!Oe(A,w,c))return c.default;w=w[A],b=v-1;break}if(!I)return c.default}}while(++b<E&&xe(w));return b===E?w:c.default};function be(w,s,c){return typeof c.join=="function"?c.join(w):w[0]+s+w[1]}function Ve(w,s,c){return typeof c.split=="function"?c.split(w):w.split(s)}function Oe(w,s,c){return typeof c.isValid=="function"?c.isValid(w,s):!0}function xe(w){return Ne(w)||Array.isArray(w)||typeof w=="function"}});var U=ne(me()),ye={Beverage:.12,Shaker:.065},Ae=class{static tryGetCustoms(s){if(typeof s.customsDescription=="string"&&s.customsDescription in Object.keys(ye))return new U.default(ye[s.customsDescription]);throw new Error(`${s.articleName}: Article is missing customs`)}static tryGetTotalQuantity(s){var c,a;if(Array.isArray(s)){let m=new U.default(0);for(let O of s)m=m.plus(this.tryGetQuantity(O));return m}return new U.default(((c=s==null?void 0:s.inventoryInfo)==null?void 0:c.numberOfItems)??((a=s.inventoryInfo)==null?void 0:a.toReceiveNumberOfItems)??0)}static getQuantity(s){var c,a,m,O;if(((c=s.inventoryInfo)==null?void 0:c.numberOfItems)||((a=s.inventoryInfo)==null?void 0:a.toReceiveNumberOfItems))return new U.default(((m=s.inventoryInfo)==null?void 0:m.numberOfItems)??((O=s.inventoryInfo)==null?void 0:O.toReceiveNumberOfItems))}static tryGetQuantity(s){let c=this.getQuantity(s);if(!c)throw new Error(`${s.articleName}: Article is missing 'inventoryInfo.numberOfItems'`);return c}static hasQuantity(s){var c,a;return Array.isArray(s)?s.findIndex(({inventoryInfo:m})=>!!(m!=null&&m.numberOfItems)||!!(m!=null&&m.toReceiveNumberOfItems))!==-1:!!((c=s.inventoryInfo)!=null&&c.numberOfItems)||!!((a=s.inventoryInfo)!=null&&a.toReceiveNumberOfItems)}static tryGetTotalVolume(s){if(Array.isArray(s)){let c=new U.default(0);for(let a of s)c=c.plus(this.tryGetTotalVolume(a).times(this.tryGetQuantity(a)));return c}if(!s.volume)throw new Error(`${s.articleName}: Article is missing volume`);return new U.default(s.volume)}static getVolume(s){if(s.volume)return new U.default(s.volume)}static hasVolume(s){return Array.isArray(s)?s.findIndex(({volume:c})=>!!c)!==-1:!!s.volume}static tryGetTotalWeight(s){if(Array.isArray(s)){let c=new U.default(0);for(let a of s)c=c.plus(this.tryGetTotalWeight(a).times(this.tryGetQuantity(a)));return c}if(!s.weight)throw new Error(`${s.articleName}: Article is missing weight`);return new U.default(s.weight)}static getWeight(s){if(s.weight)return new U.default(s.weight)}static hasWeight(s){return Array.isArray(s)?s.findIndex(({weight:c})=>!!c)!==-1:!!s.weight}},We=Ae;var F=ne(me()),Me=ne(Ce());var $=ne(me()),oe=ne(Ce()),te=class{static tryGetArticleCountStatus(s){var m,O;let c=(O=(m=s.purchaseOrderInfo)==null?void 0:m.purchaseOrderStatus)==null?void 0:O.text,a;if(c==="Inleverans")a="advised";else if(c==="Mottaget"||c==="Lagerlagd")a="received";else throw new Error(`Unexpected Purchase order status: ${c}`);return a}},B=te;B.tryGetFreeValues=s=>{let c=G=>{let E=(0,oe.default)(s,`purchaseOrderInfo.freeValues.${G}`);if(!isNaN(parseFloat(E)))return new $.default(E)},a=c("freeText1"),m=c("freeText2"),O=c("freeText3"),P=c("freeText4");return[a,m,O,P]},B.getFreeValues=(s,c)=>{let a=(E,b=new $.default(0))=>{let A=(0,oe.default)(s,`purchaseOrderInfo.freeValues.${E}`);return isNaN(parseFloat(A))?b:new $.default(A)},m=a("freeText1",c[2]),O=a("freeText2",c[3]),P=a("freeText3",c[0]),G=a("freeText4",c[1]);return[m,O,P,G]},B.tryGetFreightAndCustomsCost=(s,c,a)=>{let[m,O,P,G]=te.tryGetFreeValues(s),E=P??m,b=G??O,A=E===void 0,I=b===void 0;if(A||I){if(c&&a)return[c,a];throw new Error(`Purchase Order is missing free values for ${I?"customs fee":""}${A?`${I?" and ":""}${A?"shipping fee":""}`:""}`)}return[E,b]},B.getArticleWeightPercentageOfOrder=(s,c)=>{let a=te.getWeightOfArticles(s),m=new $.default(s.numberOfItems??0);if(m.isZero()!==a.isZero())throw new Error(`Article with unexpected Weight of '${a}' with Quantity: '${m}'`);return a.dividedBy(c)},B.getTotalArticleQuantity=(s,c)=>{let a=new $.default(0),{purchaseOrderLines:m}=s;if(m)if(Array.isArray(m))for(let O of m)a=a.plus(new $.default((0,oe.default)(O,`${c}NumberOfItems`)??0));else a=new $.default((0,oe.default)(m,`${c}NumberOfItems`)??0);return a},B.getWeightOfArticles=s=>{if(Array.isArray(s)){let c=new $.default(0);for(let a of s)c=c.plus(new $.default(a.weight??0));return c}return new $.default((s==null?void 0:s.weight)??0)},B.getTotalWeightOfArticles=s=>{if(Array.isArray(s)){let c=new $.default(0);for(let a of s){let{articleItems:m}=a;!m||(c=c.plus(te.getWeightOfArticles(m)))}return c}return s!=null&&s.articleItems?te.getWeightOfArticles(s.articleItems):new $.default(0)};var X=B;var he=class{},re=he;re.calculateArticleCosts=(s,c,a,m,O,P,G)=>{let E=X.getArticleWeightPercentageOfOrder(s,P);if((s.numberOfItems??0)==(s.weight??0))throw new Error(`Article with unexpected Weight of '${s.weight}' while Quantity is '${s.numberOfItems}'`);if(s.numberOfItems==0)return{unitCost:new F.default(0),unitShippingCost:new F.default(0)};let b=m.times(E).dividedBy(s.numberOfItems),A=c.times(a.plus(1)).minus(c);return{unitCost:b.plus(O.minus(A.times(s.numberOfItems??0))).dividedBy(G).plus(c).plus(A),unitShippingCost:b}},re.getTotalCostPerArticle=(s,c,a,m,O=new F.default(0),P=new F.default(0),G=new F.default(1))=>{if(a===0||c===0)return new F.default(0);let E=m.times(G),b=new F.default(s).times(P);return E.plus(O.minus(b.times(c))).dividedBy(a).plus(s).plus(b)},re.getArticleCostOverview=(s,c,a)=>{var v,ie;let m={},O,P;try{[O,P]=X.tryGetFreightAndCustomsCost(s)}catch(T){if(c===void 0||a===void 0)throw T;[O,P]=[new F.default(c),new F.default(a)]}let{purchaseOrderLines:G}=s;if(!G)throw new Error("Unexpected empty field 'purchaseOrderLines'");let E=X.tryGetArticleCountStatus(s),b=X.getTotalArticleQuantity(s,E);if(b.isZero())throw new Error(`Unexpected value of 'totalArticleQuantity': '${b}'`);let A=X.getTotalWeightOfArticles(G);for(let T of G){let{rowPrice:d}=T,ee=(v=T.article)==null?void 0:v.articleName,q=(ie=T.article)==null?void 0:ie.articleNumber;if(!d)throw new Error(`Unexpected value of 'rowPrice': '${d}'`);if(!T.articleItems)throw new Error("Unexpected empty field 'articleItems'");for(let R of T.articleItems){if(!R.weight){console.log(`Skipping Zero weight article of SKU: ${ee} with id: ${R.originalArticleItemId}`);continue}if((R.numberOfItems??0)==0){console.log(`Skipping Zero quantity article of SKU: ${ee} with id: ${R.originalArticleItemId}`);continue}let N=new F.default(0),[J,L]=[new F.default(0),new F.default(0)];try{({unitCost:J,unitShippingCost:L}=he.calculateArticleCosts(R,new F.default(d),N,O,P,A,b))}catch(Q){let{message:ve}=Q}let Z=X.getArticleWeightPercentageOfOrder(R,A),Y=`${R.originalArticleItemId}`,y=J.times(R.numberOfItems??0),se=L.times(R.numberOfItems??0),H=R.numberOfItems??0,K={articleSKU:q,articleName:ee,weightPercentage:Z,unitCost:J,unitShippingCost:L,totalCost:y,totalShippingCost:se,quantity:H};if(!m[Y])m[Y]=K;else{let Q=m[Y];m[Y]={...K,weightPercentage:Q.weightPercentage.plus(Z),unitCost:Q.unitCost.plus(K.unitCost),unitShippingCost:Q.unitShippingCost.plus(L),totalCost:Q.totalCost.plus(K.totalCost),totalShippingCost:Q.totalShippingCost.plus(K.totalShippingCost)}}}let W=new F.default(0),k=he.getTotalCostPerArticle(d,(0,Me.default)(T,`${E}NumberOfItems`)??0,b.toNumber(),O,P,W)}let I=Object.values(m).map(({weightPercentage:T})=>T).reduce((T,d)=>T.plus(d),new F.default(0));if(I.equals(100))throw new Error(`Unexpected sum of combined distribution: ${I}, expected: 100`);return m};var Ue=re;export{We as Articles,Ue as Duxs,X as PurchaseOrders};
/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
/*! decimal.js-light v2.5.1 https://github.com/MikeMcl/decimal.js-light/LICENCE */
